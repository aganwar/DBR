/* Tailwind layers */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Global base (compact B2B scale) */
:root { font-size: 14px; }
html, body, #root { height: 100%; }
body { @apply bg-slate-100 text-slate-800 antialiased; }

/* Small utility presets */
.btn {
  @apply px-2 py-1 text-sm rounded border border-slate-300 bg-white hover:bg-slate-50;
}
.btn-ghost {
  @apply px-2 py-1 text-sm rounded hover:bg-slate-50;
}
.btn-solid {
  @apply px-3 py-1.5 text-sm rounded bg-slate-900 text-white hover:bg-slate-800;
}

/* Cards */
.card { @apply rounded-2xl border bg-white shadow-sm; }
.card-header { @apply flex items-center justify-between px-4 py-2 border-b bg-gradient-to-b from-white to-slate-50; }

/* AG Grid modern theme (Quartz) */
.modern-ag.ag-theme-quartz {
  --ag-foreground-color: #0f172a;
  --ag-background-color: #ffffff;
  --ag-header-background-color: #f8fafc;
  --ag-odd-row-background-color: #fcfcfd;
  --ag-row-hover-color: #f1f5f9;
  --ag-selected-row-background-color: #eef2ff;
  --ag-border-color: #e2e8f0;
  --ag-borders: 1px solid #e2e8f0;
  --ag-input-focus-border-color: #0f172a;
  --ag-font-size: 12.5px;

  border-radius: 16px;
  box-shadow: 0 6px 18px rgba(2, 6, 23, 0.06);
}

/* Always stretch grid to fill its card */
.ag-theme-quartz.modern-ag,
.ag-theme-quartz.modern-ag .ag-root-wrapper {
  width: 100%;
  height: 100%;
}

/* Rounded header corners */
.ag-theme-quartz .ag-header {
  border-top-left-radius: 16px;
  border-top-right-radius: 16px;
}

/* Focused row outline */
.ag-theme-quartz .ag-row.ag-row-focus .ag-cell {
  outline: 2px solid rgba(15, 23, 42, 0.15);
  outline-offset: -2px;
}

/* Edited cell flash */
.ag-theme-quartz .ag-cell.ag-cell-flash { animation: editedPulse .8s ease-out; }
@keyframes editedPulse {
  from { background: #fef3c7; }
  to   { background: transparent; }
}

/* New / dirty row cues */
.row-new { background: #fff7e6 !important; }
.row-new .ag-cell { background: transparent !important; } /* avoid double paint */
.row-dirty { background: #f8fafc !important; }

/* Edited / dirty indicators (set cell relative so dots position correctly) */
.cell-dirty,
.cell-edited {
  position: relative;
}

/* Small cyan dot for "pending edit" */
.cell-dirty::after {
  content: "";
  position: absolute;
  top: 3px;
  right: 4px;
  width: 6px;
  height: 6px;
  border-radius: 9999px;
  background: #06b6d4; /* cyan-500 */
  opacity: 0.9;
}

/* Small green dot for "just saved" feedback */
.cell-edited::after {
  content: "";
  position: absolute;
  top: 6px;
  left: 6px;
  width: 6px;
  height: 6px;
  border-radius: 9999px;
  background: #10b981; /* emerald-500 */
}

/* Required-but-empty cue for mandatory key fields */
.required-missing,
.ag-cell.required-missing {
  box-shadow: inset 0 0 0 1px #f59e0b; /* amber-500 */
}

/* Increase AG Grid header filter/funnel icon size and click target */
.ag-theme-quartz .ag-header-cell .ag-header-icon {
  width: 32px;
  height: 32px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}
.ag-theme-quartz .ag-header-cell .ag-icon {
  width: 20px;
  height: 20px;
}

/* Control rail funnel button: enlarge click target and icon */
.w-\[48px\] > button {
  width: 32px !important;
  height: 32px !important;
}
.w-\[48px\] > button svg {
  width: 20px !important;
  height: 20px !important;
}

/* Prevent global page scrolling; let grids scroll internally */
main.flex-1.overflow-auto {
  overflow: hidden;
}

/* Ensure Tailwind bg utilities show inside AG Grid cells */
.ag-theme-alpine.modern-ag .ag-cell.bg-emerald-50 {
  background-color: #ecfdf5 !important; /* Tailwind emerald-50 */
}

.ag-theme-alpine.modern-ag .ag-cell.bg-rose-50 {
  background-color: #fff1f2 !important; /* Tailwind rose-50 */
}

